"use strict";(self["webpackChunkvue_ego"]=self["webpackChunkvue_ego"]||[]).push([[27],{2027:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var l=function(){var t=this,e=t._self._c;return e("div",[e("ParamsSearchVue"),e("paramsListVue"),e("ParamsAddVue")],1)},r=[],s=function(){var t=this,e=t._self._c;return e("div",[e("el-table",{attrs:{data:t.ListData}},[e("el-table-column",{attrs:{prop:"id",label:"规格参数ID",width:"100"}}),e("el-table-column",{attrs:{prop:"itemCatild",label:"产品关联ID",width:"100"}}),e("el-table-column",{attrs:{prop:"paramData",label:"规格参数","show-overflow-tooltip":""}}),e("el-table-column",{staticStyle:{},attrs:{label:"删除",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(e){return t.Deleterow(a.row)}}})]}}])})],1),e("el-pagination",{staticClass:"table",attrs:{background:"",layout:"prev, pager, next",total:t.alldata},on:{"current-change":t.ClickChnageHandle}})],1)},n=[],i=a(586),o=a(629),d={data(){return{ListData:[{}],alldata:0}},computed:{...(0,o.rn)("ParamsModule",["DataChange","flag"]),ResetDataChange(){return this.DataChange},FlagChanges(){return this.flag}},watch:{ResetDataChange(t,e){t==e||(this.ListData=t)},FlagChanges(t){1==t&&this.httpreq(1),this.$store.commit("ParamsModule/ChangeFlag",!1)}},methods:{httpreq(t){i.Z.GetparamsList({page:t}).then((t=>t.data)).then((t=>{200==t.status&&(this.ListData=t.result)}))},Deleterow(t){i.Z.DeleteParams({id:t.id}).then((t=>t.data)).then((t=>{200==t.status?(this.$message({type:"success",message:"删除成功"}),this.httpreq(1)):this.$message({type:"error",message:"删除失败"})}))},ClickChnageHandle(t){this.httpreq(t)}},mounted(){this.httpreq(1),i.Z.SelectParamsAll().then((t=>t.data)).then((t=>{this.alldata=t.result[0]["count(*)"]}))}},u=d,m=a(1001),h=(0,m.Z)(u,s,n,!1,null,"4efdd680",null),c=h.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form"},[e("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-input",{nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.SearchInfo.apply(null,arguments)}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),e("el-button",{attrs:{type:"primary",round:""},on:{click:t.SearchInfo}},[t._v("搜索")]),e("el-button",{attrs:{type:"primary",round:""},on:{click:t.openAddDilalog}},[t._v("添加")])],1)],1)},f=[],g={data(){return{input:""}},methods:{SearchInfo(){i.Z.GetSelectParams({search:this.input}).then((t=>t.data)).then((t=>{this.$store.commit("ParamsModule/ChangeData",t.result)}))},openAddDilalog(){this.$bus.$emit("openDialog",!0)}}},D=g,v=(0,m.Z)(D,p,f,!1,null,"5ff56d4d",null),b=v.exports,k=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"提示",visible:t.DialogFather,width:"70%","before-close":t.handleClose},on:{"update:visible":function(e){t.DialogFather=e}}},[e("el-form",{attrs:{model:t.FormAdd,"label-width":"150px"}},[e("el-form-item",{attrs:{label:"产品关联ID"}},[e("el-input",{model:{value:t.FormAdd.itemCatild,callback:function(e){t.$set(t.FormAdd,"itemCatild",e)},expression:"FormAdd.itemCatild"}})],1),e("el-form-item",{attrs:{label:"分类"}},[e("el-input",{model:{value:t.FormAdd.paramData[0].value,callback:function(e){t.$set(t.FormAdd.paramData[0],"value",e)},expression:"FormAdd.paramData[0].value"}})],1),t._l(t.FormAdd.paramData[1].children,(function(a,l){return e("el-form-item",{key:l,attrs:{label:a.key}},[e("el-input",{model:{value:t.FormAdd.paramData[1].children[a.key],callback:function(e){t.$set(t.FormAdd.paramData[1].children,a.key,e)},expression:"FormAdd.paramData[1].children[item.key]"}})],1)})),e("el-button",{on:{click:t.PushNewFrom}},[t._v("新增")]),e("el-input",{staticStyle:{width:"100px","margin-left":"20px"},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],2),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.DialogFather=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addFrom}},[t._v("确 定")])],1)],1)},F=[],y=(a(7658),{data(){return{DialogFather:!1,FormAdd:{paramData:[{},{children:[]}]},values:""}},methods:{handleClose(t){t()},addFrom(){let t=[];for(let a=0;a<this.FormAdd.paramData[1].children.length;a++){let e={};e[this.FormAdd.paramData[1].children[a].key]=this.FormAdd.paramData[1].children[this.FormAdd.paramData[1].children[a].key],t.push(e)}let e=[{value:this.FormAdd.paramData[0].value},{children:t}];e=JSON.stringify(e),i.Z.AddParams({itemCatild:this.FormAdd.itemCatild,paramData:e}).then((t=>t.data)).then((t=>{200==t.status?(this.DialogFather=!1,this.$message({type:"success",message:"添加成功"}),this.$store.commit("ParamsModule/ChangeFlag",!0)):this.$message({type:"error",message:"添加失败"})}))},PushNewFrom(){this.FormAdd.paramData[1].children.push({value:"",key:this.values||"key"}),this.values=""}},mounted(){this.$bus.$on("openDialog",(t=>this.DialogFather=t))}}),C=y,A=(0,m.Z)(C,k,F,!1,null,null,null),_=A.exports,w={components:{paramsListVue:c,ParamsSearchVue:b,ParamsAddVue:_}},x=w,P=(0,m.Z)(x,l,r,!1,null,null,null),$=P.exports}}]);
//# sourceMappingURL=27.09759891.js.map